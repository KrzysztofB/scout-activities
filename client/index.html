<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <![endif]-->
<html lang="pl">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Z Kopernikiem przez świat</title>
    <meta name="Na orbitach specjalności" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="index.css">

</head>

<body>
<script>
    function sendingIndicator(){
        const btnSubmit = document.getElementById("btnSubmit");
        btnSubmit.style.display = "none";
        const panelProgress = document.getElementById("panelProgress");
        panelProgress.style.display = "block";
        return true; 
    }
</script>

    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

    <!-- Header -->
    <header id="header">
        <nav class="navbar navbar-dark bg-dark">
                <span class="nav-item active"><a href="https://kp.zhp.pl/" class="nav-link">strona chorągwi</a></span>
                <span class="nav-item active"><a href="result.html" class="nav-link">wyniki</a></span>
        </nav>
    </header>

    <section class="mb-5">
        <header class="mx-5">
            <h2 class="d-flex justify-content-center">Na orbitach specjalności</h2>
            <p class = "d-flex justify-content-center">Zbieraj punkty dla swojego hufca</p>
        </header>
    </section>
    <section>
    <form action="api/actionform.php" method="post" enctype="multipart/form-data" class="mx-3"
    onsubmit="sendingIndicator()"
    >
        <div class="mb-5">
            <label for="scoutunitCtl" class="form-label">Hufiec</label>

            <select class="form-select  mb-3" required id="scoutunitCtl" name="scoutunit"
                aria-label=".form-select-lg example" aria-placeholder="wybierz z listy"
                aria-describedby="scoutunitHelp">
                <option value="">-- wybierz z listy --</option>

                <option value="aleksandrowkujawski">Aleksandrów Kujawski</option>
                <option value="brodnica">Brodnica</option>
                <option value="bydgoszczmiasto">Bydgoszcz-miasto</option>
                <option value="chelmza">Chełmża</option>
                <option value="chojnice">Chojnice</option>

                <option value="golubdobrzyn">Golub-Dobrzyń</option>
                <option value="grudziadz">Grudziądz</option>
                <option value="inowroclaw">Inowrocław</option>
                <option value="jablonowopomorskie">Jabłonowo Pomorskie</option>
                <option value="koronowo">Koronowo</option>
                
                <option value="mogilno">Mogilno</option>
                <option value="naklonadnotecia">Nakło nad Notecią</option>
                <option value="nowemiastolubawskie">Nowe Miasto Lubawskie</option>
                <option value="paluki">Pałuki</option>
                <option value="powiatwloclawski">Powiat Włocławski</option>
                
                <option value="rypin">Rypin</option>
                <option value="soleckujawski">Solec Kujawski</option>
                <option value="swiecie">Świecie - powiat</option>
                <option value="torun">Toruń</option>
                <option value="tuchola">Tuchola</option>
                
                <option value="wloclawek">Włocławek</option>
            </select>
            <!-- div id="scoutunitHelp" class="form-text">Wybierz Hufiec dla którego zdobywasz punkty</div -->
        </div>

        <div class="mb-5">
            <label for="participantsCtl" class="form-label">Liczba uczestników</label>
            <input type="number" class="form-control" name="participants" id="participantsCtl" autocomplete="off" required
                value="1">
        </div>

        <div class="mb-5">
            <label for="walkingCtl" class="form-label">Aktywność</label>
            <div>
                <input type="radio" class="btn-check" name="activity" value="walking" id="walkingCtl" autocomplete="off"
                    required>
                <label class="btn btn-outline-light mx-1" for="walkingCtl">Marsz</label>

                <input type="radio" class="btn-check" name="activity" value="running" id="runningCtl"
                    autocomplete="off">
                <label class="btn btn-outline-light mx-1" for="runningCtl">Bieg</label>

                <input type="radio" class="btn-check" name="activity" value="cycling" id="cyclingCtl"
                    autocomplete="off">
                <label class="btn btn-outline-light mx-1" for="cyclingCtl">Rower</label>

                <input type="radio" class="btn-check" name="activity" value="swimming" id="swimmingCtl"
                    autocomplete="off">
                <label class="btn btn-outline-light mx-1" for="swimmingCtl">Pływanie</label>
            </div>
        </div>


        <div class="mb-5">
            <label for="distanceCtl" class="form-label">Dystans [m]</label>
            <input type="number" class="form-control" name="distance" id="distanceCtl" autocomplete="off" required
                placeholder="Wprowadź dystans w metrach">
        </div>

        <div class="mb-5">
            <label for="imageCtl" class="form-label">Zdjęcie dystansu (możesz wcześniej przyciąć nieistotne brzegi - szybciej się zapisze)</label>
            <input type="hidden" name="MAX_FILE_SIZE" value="8000000" />
            <input type="file" class="form-control" name="image" id="imageCtl" autocomplete="off" required 
                accept="image/png, image/jpeg, image/*" capture="environment">
            <div id="imagePreview">
                <img src="" alt="Podgląd zdjęcia" class="image-preview__image">
                <span class="image-preview__default-text">Podgląd zdjęcia</span>
            </div>
        </div>

        <button type="submit" class="btn btn-light mb-5" name="btnSubmit" id="btnSubmit">
            Wyślij
        </button>
        <p id="panelProgress" style="display: none;"> <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Trwa wysyłanie...</p>
    </form>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <script>
        /* image preview taken from dcode channel  https://www.youtube.com/watch?v=VElnT8EoEEM */
        const inpFile = document.getElementById("imageCtl");
        const prewiewContainer = document.getElementById("imagePreview");
        const previewImage = prewiewContainer.querySelector(".image-preview__image");
        const previewDefaultText = prewiewContainer.querySelector(".image-preview__default-text");

        inpFile.addEventListener("change", function(){
            const file = this.files[0];

            if (file) {
                const reader = new FileReader();
                
                previewDefaultText.style.display = "none";
                previewImage.style.display = "block";

                reader.addEventListener("load", function(){
                    previewImage.setAttribute("src", this.result);
                });

                reader.readAsDataURL(file);
            } else {
                previewDefaultText.style.display = null;
                previewImage.style.display = null;
                previewImage.setAttribute("src", "");
            }
        });

    </script>
</body>

</html>